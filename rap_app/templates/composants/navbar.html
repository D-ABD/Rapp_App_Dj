{% load static %}
<!-- templates/composants/navbar.html -->
<nav class="navbar navbar-expand-lg navbar-dark bg-primary shadow-sm sticky-top" id="mainNavbar">
  <div class="container-fluid">

    <!-- Logo ou nom de l'application -->
    <a class="navbar-brand d-flex align-items-center" href="{% url 'home' %}">
      <img src="{% static 'images/logo.png' %}" alt="Logo Rap App" class="navbar-logo me-2">
      <span class="fw-bold">Rap App</span>
    </a>

    <!-- Bouton pour les écrans mobiles -->
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <!-- Liens de navigation -->
    <div class="collapse navbar-collapse" id="navbarNav">
      <ul class="navbar-nav me-auto mb-2 mb-lg-0">
        <li class="nav-item"><a class="nav-link" href="{% url 'home' %}"><i class="fas fa-home me-1"></i> Accueil</a></li>
        <li class="nav-item"><a class="nav-link" href="{% url 'dashboard' %}"><i class="fas fa-chart-line me-1"></i> Dashboard</a></li>
        <li class="nav-item"><a class="nav-link" href="{% url 'evenement-list' %}"><i class="fas fa-calendar-alt me-1"></i> Événements</a></li>

        <!-- Menu Prospection -->
        <li class="nav-item dropdown">
          <a class="nav-link dropdown-toggle" href="#" id="prospectionDropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
            <i class="fas fa-search me-1"></i> CRM
          </a>
          <ul class="dropdown-menu" aria-labelledby="prospectionDropdown">
            <li><a class="dropdown-item" href="{% url 'prospection-list' %}"><i class="fas fa-building me-2"></i> Prospections</a></li>
            <li><a class="dropdown-item" href="{% url 'company-list' %}"><i class="fas fa-building me-2"></i> Entreprises</a></li>
            <li><a class="dropdown-item" href="{% url 'partenaire-list' %}"><i class="fas fa-handshake me-2"></i> Partenaires</a></li>
          </ul>
        </li>

        <!-- Menu Revue d'offres -->
        <li class="nav-item dropdown">
          <a class="nav-link dropdown-toggle" href="#" id="revueOffresDropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
            <i class="fas fa-file-alt me-1"></i> Revue d'offres
          </a>
          <ul class="dropdown-menu" aria-labelledby="revueOffresDropdown">
            <li><a class="dropdown-item" href="{% url 'formation-list' %}"><i class="fas fa-graduation-cap me-2"></i> Formations</a></li>
            <li><a class="dropdown-item" href="{% url 'commentaire-list' %}"><i class="fas fa-comments me-2"></i> Commentaires</a></li>
            <li><a class="dropdown-item" href="{% url 'document-list' %}"><i class="fas fa-file-alt me-2"></i> Documents</a></li>
          </ul>
        </li>

        <!-- Menu Prépa Comp -->
      <li class="nav-item dropdown">
        <a class="nav-link dropdown-toggle" href="#" id="prepaDropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
          <i class="fas fa-clipboard-list me-1"></i> Prépa Comp
        </a>
        <ul class="dropdown-menu" aria-labelledby="prepaDropdown">
          <li><a class="dropdown-item" href="{% url 'prepa_home' %}"><i class="fas fa-home me-2"></i> Accueil Prépa</a></li>
          <li><hr class="dropdown-divider"></li>
          <li><a class="dropdown-item" href="{% url 'prepa_semaine_list' %}"><i class="fas fa-calendar-week me-2"></i> Suivi Hebdomadaire</a></li>
          <li><a class="dropdown-item" href="{% url 'prepa_semaine_create' %}"><i class="fas fa-plus me-2"></i> Ajouter une semaine</a></li>
          <li><hr class="dropdown-divider"></li>
          <li><a class="dropdown-item" href="{% url 'prepa_global_list' %}"><i class="fas fa-chart-bar me-2"></i> Bilans globaux</a></li>
          <li><a class="dropdown-item" href="{% url 'prepa_global_create' %}"><i class="fas fa-plus-circle me-2"></i> Ajouter un bilan</a></li>
        </ul>
      </li>


        <li class="nav-item"><a class="nav-link" href="{% url 'parametres' %}"><i class="fas fa-cog me-1"></i> Paramètres</a></li>
      </ul>

      <!-- Section utilisateur -->
      <ul class="navbar-nav ms-auto mb-2 mb-lg-0">
        {% if user.is_authenticated %}
          <li class="nav-item">
            <a class="nav-link" href="{% url 'user-profile' %}"><i class="fas fa-user me-1"></i> {{ user.username }}</a>
          </li>
          <li class="nav-item">
            <a class="nav-link" href="{% url 'logout' %}"><i class="fas fa-sign-out-alt me-1"></i> Déconnexion</a>
          </li>
        {% else %}
          <li class="nav-item">
            <a class="nav-link" href="{% url 'login' %}"><i class="fas fa-sign-in-alt me-1"></i> Connexion</a>
          </li>
        {% endif %}
      </ul>
    </div>
  </div>
</nav>

<!-- Styles personnalisés -->
<style>
.navbar-logo {
  height: 50px;
  width: auto;
  max-height: 100%;
}

.navbar {
  min-height: 80px;
  transition: background-color 0.3s ease-in-out, box-shadow 0.3s ease-in-out;
  background-color: rgba(13, 110, 253, 0.9) !important; /* Fond semi-transparent */
}

.navbar.scrolled {
  background-color: #0d6efd !important; /* Fond opaque au défilement */
  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
}

.navbar .nav-link {
  font-weight: 500;
  transition: color 0.2s, transform 0.2s;
  position: relative;
}

.navbar .nav-link:hover {
  color: #ffd !important;
  transform: translateY(-2px);
}

.navbar .nav-link::after {
  content: '';
  position: absolute;
  width: 0;
  height: 2px;
  background: #ffd;
  bottom: 0;
  left: 50%;
  transform: translateX(-50%);
  transition: width 0.3s ease;
}

.navbar .nav-link:hover::after {
  width: 100%;
}

.navbar .nav-link.active::after {
  width: 100%;
}

/* Styles pour les sous-menus */
.dropdown-menu {
  background-color: rgba(13, 110, 253, 0.95);
  border: none;
  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
}

.dropdown-item {
  color: #fff !important;
  transition: background-color 0.2s, transform 0.2s;
}

.dropdown-item:hover {
  background-color: rgba(255, 255, 255, 0.1);
  transform: translateX(5px);
}

.dropdown-item i {
  width: 20px;
  text-align: center;
}
</style>

<!-- Script pour l'effet de défilement -->
<script>
document.addEventListener("DOMContentLoaded", function () {
  const navbar = document.getElementById("mainNavbar");
  window.addEventListener("scroll", function () {
    if (window.scrollY > 50) {
      navbar.classList.add("scrolled");
    } else {
      navbar.classList.remove("scrolled");
    }
  });
});
</script>