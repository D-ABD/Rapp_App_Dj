{% extends "base.html" %}

{% block content %}
<div class="container mt-4">
    <h1 class="mb-4">ğŸ“Š DÃ©tails du Rapport</h1>

    <div class="card">
        <div class="card-header">
            <h3>ğŸ“Œ Rapport sur la formation: <strong>{{ rapport.formation.nom }}</strong></h3>
        </div>
        <div class="card-body">
            <p><strong>ğŸ« Centre:</strong> {{ rapport.centre.nom }}</p>
            <p><strong>ğŸ“ Statut:</strong> {{ rapport.statut.nom }}</p>
            <p><strong>ğŸ“… PÃ©riode:</strong> {{ rapport.date_debut }} - {{ rapport.date_fin }}</p>
            <p><strong>ğŸ”¢ NumÃ©ro Kairos:</strong> {{ rapport.formation.num_kairos|default:"-" }}</p>
            <p><strong>ğŸ”¢ NumÃ©ro Offre:</strong> {{ rapport.formation.num_offre|default:"-" }}</p>
            <p><strong>ğŸ”¢ NumÃ©ro Produit:</strong> {{ rapport.formation.num_produit|default:"-" }}</p>

            <hr>

            <h4>ğŸ“Š Statistiques</h4>
            <p><strong>ğŸ‘¥ Total Inscrits:</strong> {{ rapport.total_inscrits }}/{{ rapport.total_places }}</p>
            <p><strong>ğŸ“Œ CRIF:</strong> {{ rapport.inscrits_crif }}/{{ rapport.prevus_crif }}</p>
            <p><strong>ğŸ“Œ MP:</strong> {{ rapport.inscrits_mp }}/{{ rapport.prevus_mp }}</p>
            <p><strong>ğŸ“Š Taux de Saturation:</strong> {{ rapport.saturation_moyenne|floatformat:2 }}%</p>
            <p><strong>ğŸ“‰ Places Disponibles:</strong> {{ rapport.total_places|default:0|add:"-1"|add:rapport.total_inscrits }}</p>

            <hr>

            <h4>ğŸ“Œ Recrutement & Ã‰vÃ©nements</h4>
            <p><strong>ğŸ¯ Nombre de candidats:</strong> {{ rapport.nombre_candidats }}</p>
            <p><strong>ğŸ“‹ Nombre d'entretiens:</strong> {{ rapport.nombre_entretiens }}</p>
            <p><strong>ğŸ“… Nombre d'Ã©vÃ©nements:</strong> {{ rapport.nombre_evenements }}</p>
            <p><strong>ğŸ¤ Nombre de partenaires:</strong> {{ rapport.nombre_partenaires }}</p>

            <hr>

            <h4>ğŸ“ Derniers Commentaires</h4>
            {% if rapport.derniers_commentaires %}
                <ul>
                    {% for commentaire in rapport.derniers_commentaires %}
                        <li><strong>{{ commentaire.utilisateur }}</strong>: {{ commentaire.contenu }} ({{ commentaire.date }})</li>
                    {% endfor %}
                </ul>
            {% else %}
                <p>Aucun commentaire disponible.</p>
            {% endif %}
        </div>
    </div>

    <div class="mt-4">
        <a href="{% url 'list_rapports' %}" class="btn btn-secondary">ğŸ”™ Retour</a>
        <a href="{% url 'export_rapport_pdf' %}" class="btn btn-primary">ğŸ“„ Exporter en PDF</a>
        <a href="{% url 'export_rapport_excel' %}" class="btn btn-success">ğŸ“Š Exporter en Excel</a>
        <a href="{% url 'export_rapport_word' %}" class="btn btn-info">ğŸ“ Exporter en Word</a>
    </div>
</div>
{% endblock %}
