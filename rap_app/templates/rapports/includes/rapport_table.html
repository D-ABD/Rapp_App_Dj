<h2>ðŸ“‹ DÃ©tails des Formations</h2>
<table class="table table-hover align-middle">
    <thead class="bg-light">
        <tr>
            <th>Nom</th>
            <th>Centre</th>
            <th>Type d'Offre / Statut</th>
            <th>NÂ° Kairos</th>
            <th>Dates</th>
            <th>Assistante</th>
            <th>Candidats</th>
            <th>Entretiens</th>
            <th>PrÃ©vus CRIF / MP</th>
            <th>Inscrits CRIF / MP</th>
            <th>Places restantes</th>
            <th>Transformation</th>
            <th>Saturation</th>
        </tr>
    </thead>
    <tbody>
        {% for formation in donnees.formations %}
        <tr>
            <!-- Nom -->
            <td class="fw-bold">{{ formation.nom }}</td>

            <!-- Centre -->
            <td class="text-center">{{ formation.centre|default_if_none:"-" }}</td>

            <!-- Type d'offre / Statut -->
            <td class="text-center">
                <span class="badge bg-primary">{{ formation.type_offre }}</span><br>
                <span class="badge text-white px-2" style="background-color: {{ formation.statut_couleur }};">
                    {{ formation.statut }}
                </span>
            </td>

            <!-- NumÃ©ro Kairos -->
            <td class="text-center">{{ formation.num_kairos|default_if_none:"-" }}</td>

            <!-- Dates -->
            <td class="text-center">
                <small>
                    <i class="fas fa-calendar-day text-primary"></i> {{ formation.start_date|date:"d/m/Y"|default:"-" }}<br>
                    <i class="fas fa-calendar-check text-danger"></i> {{ formation.end_date|date:"d/m/Y"|default:"-" }}
                </small>
            </td>

            <!-- Assistante -->
            <td class="text-center">{{ formation.assistante|default_if_none:"-" }}</td>

            <!-- Candidats -->
            <td class="text-center">{{ formation.nombre_candidats|default_if_none:"0" }}</td>

            <!-- Entretiens -->
            <td class="text-center">{{ formation.nombre_entretiens|default_if_none:"0" }}</td>

            <!-- PrÃ©vus CRIF/MP -->
            <td class="text-center">
                <span class="badge bg-secondary px-2">CRIF: {{ formation.places_prevues_crif|default_if_none:"0" }}</span>
                <span class="badge bg-success px-2">MP: {{ formation.places_prevues_mp|default_if_none:"0" }}</span>
            </td>

            <!-- Inscrits CRIF/MP -->
            <td class="text-center">
                <span class="badge bg-secondary px-2">CRIF: {{ formation.inscrits_crif|default_if_none:"0" }}</span>
                <span class="badge bg-success px-2">MP: {{ formation.inscrits_mp|default_if_none:"0" }}</span>
            </td>

            <!-- Places restantes -->
            <td class="text-center">
                <span class="fw-bold">{{ formation.places_disponibles|default_if_none:"0" }}</span>
            </td>

            <!-- Transformation -->
            <td class="text-center">
                <strong>{{ formation.taux_transformation|floatformat:0|default:"0" }}%</strong>
            </td>

            <!-- Saturation -->
            <td class="text-center">
                <div class="progress" style="height: 8px;">
                    <div class="progress-bar 
                        {% if formation.taux_remplissage >= 100 %} bg-success 
                        {% elif formation.taux_remplissage >= 80 %} bg-primary 
                        {% elif formation.taux_remplissage >= 50 %} bg-warning 
                        {% else %} bg-danger {% endif %}" 
                        role="progressbar" style="width: {{ formation.taux_remplissage|default:0 }}%">
                    </div>
                </div>
                <span class="fw-bold">{{ formation.taux_remplissage|floatformat:0|default:"0" }}%</span>
            </td>
        </tr>
        {% endfor %}
    </tbody>
</table>
